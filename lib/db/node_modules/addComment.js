'use strict';

var inspectObject = require('../../inspectObject');
var extract = require('../../extract');

var sanitize = require('../../sanitize');

var struct = require('struct');

function addComment(obj, id, callback) {
	var client = this;
	var err = inspectObject(obj, struct.comment);
	if (err) return callback(err);
	obj = extract(obj, struct.comment);
	obj.text = sanitize(obj.text);
	client.addObject('article:' + id + ':comment', obj, callback);
}

module.exports = addComment;
