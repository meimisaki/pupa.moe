'use strict';

var Syncher = require('../../syncher');

function removeArticle(id, callback) {
	var client = this;
	var syncher = new Syncher();
	syncher.add(client.selectArticles.bind(client, {id: id}));
	syncher.add(client.removeIndex.bind(client, 'article', id));
	syncher.run(function (selectArgs, removeArgs) {
		var err = selectArgs[0] || removeArgs[0];
		if (err) return callback(err);
		var article = selectArgs[1].pop();
		client.removeObject('category:' + article.category.id + ':article', id, callback);
	});
}

module.exports = removeArticle;
